language: php

php:
  - 5.3
  - 5.4
  - 5.5
#  - hhvm

services:
  - memcached
  - redis
  - mysql

notifications:
  email:
    on_success: change
    on_failure: never
    
before_script:
  - php composer.phar selfupdate
  - rm composer.lock
  - php composer.phar install
  - mysql -e 'create database ciims_test;'                    # Create Database
  - echo "https://$TRAVIS_BUILD_NUMBER-$TRAVIS_BUILD_ID-$TRAVIS_JOB_ID.travis-ci.org" > protected/runtime/hostname
  - php protected/yiic-test.php migrate up --interactive=0    # Run Migrations
  - cd protected/tests                                        # Navigate to the Tests Directory to run the tests